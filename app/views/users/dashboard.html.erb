<% content_for :title do %>
  <%= "Papoters | My dashboard" %>
<% end %>

<div class="padded-top-xxl bg-blue text-center dashboard-top" id="dashboard-page">
  <div class="container">

    <h1>My dashboard</h1>
    <p><%= link_to "See my profile", user_path(@user) %></p>

    <div class="dashboard-tabs">
      <a class="dashboard-tab" data-target="#pinned-offers">
        <h4><i class="fa fa-thumb-tack" aria-hidden="true"></i></h4>
      </a>
      <a class="dashboard-tab active" data-target="#current-sessions">
        <h5>Current sessions</h5>
      </a>
      <a class="dashboard-tab" data-target="#past-sessions">
        <h5>Past sessions</h5>
      </a>
      <a class="dashboard-tab" data-target="#cancelled-sessions">
        <h5>Cancelled sessions</h5>
      </a>
    </div>

  </div>
</div>


<div class="padded-top-s padded-bottom-xxl bg-light-gray">
  <div class="container">

    <div id="pinned-offers" class="dashboard-tab-content hidden">
      <div class="row">
        <div class="col-xs-12 col-lg-10 col-lg-offset-1">
          <% if @user.pinned_offers.present? %>
            <% @user.pinned_offers.each do |pinned_offer| %>
              <%= render "offers/card", offer: pinned_offer.offer %>
            <% end %>
          <% else %>
            <p>You have no offers pinned.</p>
          <% end %>
        </div>
      </div>
    </div>


    <div id="current-sessions" class="dashboard-tab-content">
      <div class="row text-center">
        <div class="col-xs-12 col-md-3 padded-bottom-xs">
          <div class="session-step-header padded-top-s padded-bottom-xs">
            <div></div><h3>Request</h3><div></div>
          </div>
          <div id="request-sessions">
            <% @user.deals_request.each do |deal| %>
              <%= render "deals/card", deal: deal %>
            <% end %>
          </div>
        </div>
        <div class="col-xs-12 col-md-3 padded-bottom-xs">
          <div class="session-step-header padded-top-s padded-bottom-xs">
            <div></div><h3>Proposition</h3><div></div>
          </div>
          <div id="proposition-sessions">
            <% @user.deals_proposition.each do |deal| %>
              <%= render "deals/card", deal: deal %>
            <% end %>
          </div>
        </div>
        <div class="col-xs-12 col-md-3 padded-bottom-xs">
          <div class="session-step-header padded-top-s padded-bottom-xs">
            <div></div><h3>Open</h3><div></div>
          </div>
          <div id="open-sessions">
            <% @user.deals_open.each do |deal| %>
              <%= render "deals/card", deal: deal %>
            <% end %>
          </div>
        </div>
        <div class="col-xs-12 col-md-3 padded-bottom-xs">
          <div class="session-step-header padded-top-s padded-bottom-xs">
            <div></div><h3>Closed</h3><div></div>
          </div>
          <div id="closed-sessions-recent">
            <% @user.deals_closed_recent.each do |deal| %>
              <%= render "deals/card", deal: deal %>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <div id="past-sessions" class="dashboard-tab-content hidden">
      <div class="row text-center">
        <div class="col-xs-12 col-md-8 col-md-offset-2 padded-top-s">
          <div id="closed-sessions-old">
            <% @user.deals_closed_old.each do |deal| %>
              <%= render "deals/card", deal: deal %>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <div id="cancelled-sessions" class="dashboard-tab-content hidden">
      <div class="row text-center">
        <div class="col-xs-12 col-md-8 col-md-offset-2 padded-top-s">
          <div id="cancelled-sessions-all">
            <% @user.deals_cancelled.each do |deal| %>
              <%= render "deals/card", deal: deal %>
            <% end %>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
